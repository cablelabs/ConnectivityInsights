# Connectivity Insights API User Story

| **Item** | **Details** |
| ---- | ------- |
| ***Summary*** | As an application developer, I need to be able to understand my application's network performance demands and determine the likelihood that the network will be able to meet those demands. I can represent my application's network performance demands as a set of metrics (latency, jitter, loss, throughput) and register these with the network using Application Profiles. At runtime, I can query the network to determine if a given device is likely to receive that level of network performance across each metric. In addition, I would like to receive notifications when the network is unable to meet the network performance thresholds for specific device.  |
| ***Roles, Actors and Scope*** | **Roles:** API Consumer:Developer<br> **Actors:** Application service providers, hyperscalers, application developers. Currently the API does not explicitly handle consent management (expects that the API consumer either owns the device subscriptions or has agreed to manage consent as a part of general Terms and Conditions) and hence end users are not included as Actors. As this changes, the actor list will be extended with end users. <br> **Scope:** <ul><li>Perform network quality check againt the application profile for specific user sessions</li><li>Create subscriptions to recieve notifications if the network is not able to meet the application's requirements </li></ul> |
| ***Pre-conditions*** |The preconditions are listed below:<br><ol><li>The API Consumer:BusinessManager and API Consumer:Administrator have been onboarded to the API Exposure Platfrom.</li><li>The API Consumer:BusinessManager has successfully subscribed to the Connectivity Insights product from the product catalog.</li><li>The API Consumer:Administrator has onboarded the developer:User to the platform.</li><li>The API Consumer either owns the device subscriptions or has agreed to the terms and conditions of the CSP for managing consent of subscription owners.</li><li>The means to get the access token are known to the API Consumer:User to ensure secure access of the API.|
| ***Activities/Steps*** | **Starts when:** <br>1. The API consumer application server makes a POST request to the check-network-quality endpoint to query if the network can meet the application profile requirements for a specific device.<br>2. Optionally, the API consumer application server creates a subscription to receive notifications about network quality changes.<br><br>**Ends when:** <br>1. The API endpoint is able to report whether the network can meet the application requirements or not for a given device. or<br>2. The monitoring session resource deletion was triggered automatically because the requested duration has expired or the maximum number of events was reached. |
| ***Post-conditions*** | 1. none for synchronous network quality check API. <br>2. If subscriptions are created, notifications are sent when network quality changes affect the ability to meet application requirements until the subscription is deleted or has expired.|
| ***Exceptions*** | Several exceptions might occur <br>- Unauthorized: Not valid credentials (e.g. use of already expired access token).<br>- Invalid input: Not valid input data to invoke operation (e.g. IP address format not as expected).<br>- Conflict: Internal configuration didnâ€™t allow for operations.<br>- Not Found: Requested Application Profile ID or Subscription ID doesn't exist.<br>- Session-not-created: Due to other internal errors|
